"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.minimatchFilter = exports.minimatch = void 0;
const minimatch_1 = require("minimatch");
const cache = new Map();
function minimatch(pattern, options, useCache = true) {
    const key = options ? `${pattern}:${JSON.stringify(options)}` : pattern;
    if (useCache) {
        const cachedResult = cache.get(key);
        if (cachedResult) {
            return cachedResult;
        }
    }
    const instance = new minimatch_1.Minimatch(pattern, options);
    if (useCache) {
        cache.set(key, instance);
    }
    return instance;
}
exports.minimatch = minimatch;
function minimatchFilter(pattern, options, useCache = true) {
    const key = options ? `${pattern}:${JSON.stringify(options)}` : pattern;
    if (useCache) {
        const cachedResult = cache.get(key);
        if (cachedResult) {
            return (fileName) => cachedResult.match(fileName);
        }
    }
    const instance = new minimatch_1.Minimatch(pattern, options);
    if (useCache) {
        cache.set(key, instance);
    }
    return (fileName) => instance.match(fileName);
}
exports.minimatchFilter = minimatchFilter;
//# sourceMappingURL=minimatch.js.map